# ğŸ—ºï¸ Viz - ç‰©æµè·¯å¾„è§„åˆ’å¯è§†åŒ–å·¥å…·

ä¸€ä¸ªä¸“ä¸šçš„ç‰©æµè·¯å¾„è§„åˆ’å¯è§†åŒ–å·¥å…·ï¼ŒåŸºäºFoliumåœ°å›¾åº“ï¼Œæä¾›ç¾è§‚çš„ç‰©æµé…é€è·¯çº¿å¯è§†åŒ–å±•ç¤ºã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- ğŸ—ºï¸ **äº¤äº’å¼åœ°å›¾å¯è§†åŒ–** - ä½¿ç”¨Foliumåˆ›å»ºç¾è§‚çš„äº¤äº’å¼åœ°å›¾
- ğŸšš **ç‰©æµè·¯å¾„è§„åˆ’** - æ”¯æŒè½¦è¾†è·¯å¾„è§„åˆ’(VRP)é—®é¢˜çš„å¯è§†åŒ–
- ğŸ“ **å¤šç±»å‹æ ‡è®°** - ä»“åº“ã€è½¦è¾†ã€ç«™ç‚¹ã€æœªæŒ‡æ´¾ç«™ç‚¹çš„åŒºåˆ†æ˜¾ç¤º
- ğŸ›£ï¸ **åŠ¨æ€è·¯çº¿åŠ¨ç”»** - ä½¿ç”¨AntPathæ’ä»¶å±•ç¤ºåŠ¨æ€è¡Œé©¶è·¯çº¿
- ğŸ“Š **è¯¦ç»†ä¿¡æ¯å¼¹çª—** - ç‚¹å‡»æ ‡è®°æ˜¾ç¤ºå®Œæ•´çš„ç‰©æµä¿¡æ¯
- ğŸ¯ **åæ ‡è½¬æ¢** - æ”¯æŒBD-09åˆ°WGS84åæ ‡ç³»çš„ç²¾ç¡®è½¬æ¢
- ğŸ“ **æ—¥å¿—è§£æ** - ä»ç®—æ³•æ—¥å¿—è‡ªåŠ¨æå–æ•°æ®å¹¶ç”Ÿæˆå¯è§†åŒ–
- ğŸ”„ **æ‰¹é‡å¤„ç†** - æ”¯æŒæ‰¹é‡æµ‹è¯•å’Œæ‰¹é‡å¯è§†åŒ–
- ğŸ” **æ—¥å¿—åŒ¹é…** - ä»ç®—æ³•æ—¥å¿—ä¸­æå–è¾“å…¥è¾“å‡ºï¼ŒåŒ¹é…è¯·æ±‚å“åº”å…³ç³»
- ğŸ“ˆ **å¯¹æ¯”å¯è§†åŒ–** - æ”¯æŒåŸå§‹å“åº”ä¸æ–°å“åº”çš„å¯è§†åŒ–å¯¹æ¯”
- ğŸ”Œ **æœ¬åœ°æ¥å£é›†æˆ** - æ”¯æŒè°ƒç”¨æœ¬åœ°ç®—æ³•æ¥å£å¹¶å¯è§†åŒ–ç»“æœ

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
viz/
â”œâ”€â”€ main.py                 # ä¸»åº”ç”¨ç¨‹åº - ç‰©æµå¯è§†åŒ–æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ batch_viz.py           # æ‰¹é‡å¯è§†åŒ–è„šæœ¬
â”œâ”€â”€ batch_test.py          # æ‰¹é‡æµ‹è¯•è„šæœ¬
â”œâ”€â”€ viz_from_logs.py       # ä»æ—¥å¿—ç”Ÿæˆå¯è§†åŒ–
â”œâ”€â”€ rid_log_matcher.py     # æ—¥å¿—è¯·æ±‚å“åº”åŒ¹é…å™¨
â”œâ”€â”€ request_and_visualize.py # è¯·æ±‚ä¸å¯è§†åŒ–å¯¹æ¯”å·¥å…·
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ coord_transform.py  # åæ ‡è½¬æ¢å·¥å…· (BD-09 â†’ WGS84)
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®å’Œä¾èµ–ç®¡ç†
â”œâ”€â”€ Makefile               # æ„å»ºå’Œè¿è¡Œè„šæœ¬
â”œâ”€â”€ data/                  # ä¸»è¦æ•°æ®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ req.json          # è¯·æ±‚æ•°æ®
â”‚   â””â”€â”€ response.json     # APIå“åº”æ•°æ®
â”œâ”€â”€ test_input/           # æ‰¹é‡æµ‹è¯•è¾“å…¥æ•°æ®
â”œâ”€â”€ test_output/          # æ‰¹é‡æµ‹è¯•è¾“å‡ºç»“æœ
â”œâ”€â”€ test_input_from_log/  # ä»æ—¥å¿—æå–çš„æµ‹è¯•è¾“å…¥
â”œâ”€â”€ test_output_from_log/ # ä»æ—¥å¿—æå–çš„æµ‹è¯•è¾“å‡º
â”œâ”€â”€ from_logs/            # åŸå§‹æ—¥å¿—æ–‡ä»¶å’Œè§£ææ•°æ®
â”œâ”€â”€ mylog_input/          # ç®—æ³•æ—¥å¿—è¾“å…¥ç›®å½•
â”œâ”€â”€ mylog_output/         # ç®—æ³•æ—¥å¿—è¾“å‡ºç›®å½•
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```

## ğŸ“ æ–‡ä»¶å¤¹è¯¦è§£

### ğŸ“Š æ•°æ®æ–‡ä»¶å¤¹

| æ–‡ä»¶å¤¹ | ğŸ“ ç”¨é€” | ğŸ”— å¯¹åº”æ–‡ä»¶/å‘½ä»¤ |
|:------:|---------|------------------|
| **`data/`** | å­˜æ”¾ä¸»è¦çš„è¯·æ±‚æ•°æ®å’ŒAPIå“åº”ç»“æœ | [main.py](file:///home/wsl/viz/main.py) é»˜è®¤è¾“å…¥<br>`make run` / `make debug` |
| **`test_input/`** | å­˜æ”¾ç”¨äºæ‰¹é‡æµ‹è¯•çš„è¾“å…¥JSONæ–‡ä»¶ | [batch_test.py](file:///home/wsl/viz/batch_test.py) è¾“å…¥<br>`make test_batch` |
| **`test_output/`** | å­˜æ”¾æ‰¹é‡æµ‹è¯•çš„è¾“å‡ºç»“æœï¼ˆHTML + JSONï¼‰ | [batch_test.py](file:///home/wsl/viz/batch_test.py) è¾“å‡º<br>`make test_batch` |
| **`test_input_from_log/`** | å­˜æ”¾ä»æ—¥å¿—æå–çš„æµ‹è¯•æ•°æ®ï¼ˆJSON + TXTï¼‰ | [batch_test.py](file:///home/wsl/viz/batch_test.py) è¾“å…¥<br>`make test_batch_from_log` |
| **`test_output_from_log/`** | å­˜æ”¾ä»æ—¥å¿—æå–æ•°æ®çš„æµ‹è¯•è¾“å‡º | [batch_test.py](file:///home/wsl/viz/batch_test.py) è¾“å‡º<br>`make test_batch_from_log` |
| **`from_logs/`** | å­˜æ”¾åŸå§‹æ—¥å¿—æ–‡ä»¶å’Œè§£æåçš„æ•°æ® | [viz_from_logs.py](file:///home/wsl/viz/viz_from_logs.py) è¾“å…¥/è¾“å‡º |
| **`mylog_input/`** | å­˜æ”¾ç®—æ³•æ—¥å¿—æ–‡ä»¶ï¼Œç”¨äºæå–è¾“å…¥è¾“å‡ºæ•°æ® | [rid_log_matcher.py](file:///home/wsl/viz/rid_log_matcher.py) è¾“å…¥ |
| **`mylog_output/`** | å­˜æ”¾ä»ç®—æ³•æ—¥å¿—æå–çš„è¯·æ±‚å“åº”æ•°æ® | [rid_log_matcher.py](file:///home/wsl/viz/rid_log_matcher.py) è¾“å‡º |
| **`4c1396ccc039445ea171519d811d85cc/`** | ç‰¹å®šæ•°æ®é›†ï¼ˆå“ˆå¸Œå‘½åï¼‰ | [batch_viz.py](file:///home/wsl/viz/batch_viz.py) è¾“å…¥/è¾“å‡º |

### ğŸ› ï¸ å·¥å…·æ–‡ä»¶å¤¹

| æ–‡ä»¶å¤¹ | ğŸ“ ç”¨é€” | ğŸ“„ è¯´æ˜ |
|:------:|---------|--------|
| **`utils/`** | å·¥å…·å‡½æ•°æ¨¡å— | åŒ…å«åæ ‡è½¬æ¢ç­‰åŠŸèƒ½ |

### âš™ï¸ ç³»ç»Ÿæ–‡ä»¶å¤¹

| æ–‡ä»¶å¤¹ | ğŸ“ ç”¨é€” | ğŸ“„ è¯´æ˜ |
|:------:|---------|--------|
| **`.venv/`** | Pythonè™šæ‹Ÿç¯å¢ƒ | é¡¹ç›®ä¾èµ–ç®¡ç† |
| **`__pycache__/`** | Pythonç¼“å­˜ | ç¼–è¯‘åçš„å­—èŠ‚ç  |

## ğŸ”— æ–‡ä»¶ä¸å‘½ä»¤å¯¹åº”å…³ç³»

### 1ï¸âƒ£ [main.py](file:///home/wsl/viz/main.py) - ä¸»å¯è§†åŒ–è„šæœ¬

```bash
# è¾“å…¥
data/req.json          # è¯·æ±‚æ•°æ®
data/response.json     # APIå“åº”æ•°æ®

# è¾“å‡º
input_map.html         # è¾“å…¥åœ°å›¾ï¼ˆç«™ç‚¹åˆ†å¸ƒï¼‰
output_map.html        # è¾“å‡ºåœ°å›¾ï¼ˆè·¯å¾„è§„åˆ’ï¼‰

# å¯¹åº”Makeå‘½ä»¤
make run    # å®Œæ•´æµç¨‹ï¼šå‘é€è¯·æ±‚ â†’ ç”Ÿæˆå¯è§†åŒ–
make debug  # ä»…ç”Ÿæˆå¯è§†åŒ–ï¼ˆä¸å‘é€è¯·æ±‚ï¼‰
```

### 2ï¸âƒ£ [batch_viz.py](file:///home/wsl/viz/batch_viz.py) - æ‰¹é‡å¯è§†åŒ–è„šæœ¬

```bash
# è¾“å…¥
4c1396ccc039445ea171519d811d85cc/
â”œâ”€â”€ 1-req.json
â”œâ”€â”€ 1-rsp.json
â”œâ”€â”€ 2-req.json
â”œâ”€â”€ 2-rsp.json
â””â”€â”€ ...

# è¾“å‡º
4c1396ccc039445ea171519d811d85cc/html/
â”œâ”€â”€ 1-req.html
â”œâ”€â”€ 1-rsp.html
â”œâ”€â”€ 2-req.html
â”œâ”€â”€ 2-rsp.html
â””â”€â”€ ...
```

### 3ï¸âƒ£ [viz_from_logs.py](file:///home/wsl/viz/viz_from_logs.py) - ä»æ—¥å¿—ç”Ÿæˆå¯è§†åŒ–

```bash
# è¾“å…¥
from_logs/
â””â”€â”€ 428203a665124523ad6dab289aff247e.txt  # åŸå§‹æ—¥å¿—æ–‡ä»¶

# è¾“å‡º
from_logs/428203a665124523ad6dab289aff247e/
â”œâ”€â”€ req.json          # è§£æåçš„è¯·æ±‚æ•°æ®
â”œâ”€â”€ response.json     # è§£æåçš„å“åº”æ•°æ®
â”œâ”€â”€ input_map.html    # è¾“å…¥åœ°å›¾
â””â”€â”€ output_map.html   # è¾“å‡ºåœ°å›¾
```

### 4ï¸âƒ£ [batch_test.py](file:///home/wsl/viz/batch_test.py) - æ‰¹é‡æµ‹è¯•è„šæœ¬

```bash
# ä½¿ç”¨ test_input çš„æ‰¹é‡æµ‹è¯•
make test_batch
# è¾“å…¥: test_input/*.json
# è¾“å‡º: test_output/run_YYYYMMDD_HHMMSS/

# ä½¿ç”¨ test_input_from_log çš„æ‰¹é‡æµ‹è¯•
make test_batch_from_log
# è¾“å…¥: test_input_from_log/*.json
# è¾“å‡º: test_output_from_log/run_YYYYMMDD_HHMMSS/
```

### 5ï¸âƒ£ [rid_log_matcher.py](file:///home/wsl/viz/rid_log_matcher.py) - æ—¥å¿—è¯·æ±‚å“åº”åŒ¹é…å™¨

```bash
# è¾“å…¥
mylog_input/app_YYYY-MM-DD.log  # ç®—æ³•æ—¥å¿—æ–‡ä»¶

# è¾“å‡º
mylog_input/app_YYYY-MM-DD/{rid}_req.json  # æå–çš„è¯·æ±‚æ•°æ®
mylog_input/app_YYYY-MM-DD/{rid}_rsp.json  # æå–çš„å“åº”æ•°æ®

# åŠŸèƒ½
# - ä»ç®—æ³•æ—¥å¿—ä¸­æå–è¯·æ±‚å’Œå“åº”æ•°æ®
# - åŸºäºridåŒ¹é…è¯·æ±‚å“åº”å¯¹
# - è¿‡æ»¤ç‰¹å®šç±»å‹çš„å†³ç­–(decision_type=1, plan_type=0)
# - ç”Ÿæˆè°ƒåº¦ä¸šåŠ¡åˆ†ææŠ¥å‘Š
```

### 6ï¸âƒ£ [request_and_visualize.py](file:///home/wsl/viz/request_and_visualize.py) - è¯·æ±‚ä¸å¯è§†åŒ–å¯¹æ¯”å·¥å…·

```bash
# å‘½ä»¤1: å‘é€è¯·æ±‚åˆ°æœ¬åœ°ç®—æ³•æ¥å£
python request_and_visualize.py request --input-dir mylog_input/app_YYYY-MM-DD --api-url http://localhost:8000/api/your-endpoint

# å‘½ä»¤2: å¯è§†åŒ–åŸå§‹è¾“å…¥è¾“å‡º
python request_and_visualize.py visualize-original --input-dir mylog_input/app_YYYY-MM-DD

# å‘½ä»¤3: å¯è§†åŒ–æ–°å“åº”
python request_and_visualize.py visualize-new --input-dir mylog_input/app_YYYY-MM-DD --new-output-dir new_responses

# å‘½ä»¤4: å¯¹æ¯”å¯è§†åŒ–æ–°æ—§å“åº”
python request_and_visualize.py visualize-compare --input-dir mylog_input/app_YYYY-MM-DD --new-output-dir new_responses

# è¾“å‡º
# - æ–°å“åº”æ•°æ®: new_responses/{rid}_new_rsp.json
# - å¯è§†åŒ–ç»“æœ: visualization/original/ æˆ– visualization/compare/
```

## ğŸ“‹ Makefileå‘½ä»¤è¯´æ˜

| å‘½ä»¤ | ğŸ¯ åŠŸèƒ½ | ğŸ“‚ æ¶‰åŠæ–‡ä»¶å¤¹ |
|:-----|:--------|:-------------|
| `make run` | å‘é€è¯·æ±‚åˆ°APIå¹¶ç”Ÿæˆå¯è§†åŒ– | `data/` â†’ æ ¹ç›®å½•HTML |
| `make debug` | ä»…ç”Ÿæˆå¯è§†åŒ–ï¼ˆä¸å‘é€è¯·æ±‚ï¼‰ | `data/` â†’ æ ¹ç›®å½•HTML |
| `make test_batch` | æ‰¹é‡æµ‹è¯•ï¼ˆä½¿ç”¨test_inputï¼‰ | `test_input/` â†’ `test_output/` |
| `make test_batch_from_log` | æ‰¹é‡æµ‹è¯•ï¼ˆä½¿ç”¨test_input_from_logï¼‰ | `test_input_from_log/` â†’ `test_output_from_log/` |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ uv åŒ…ç®¡ç†å™¨ï¼ˆæ¨èï¼‰
uv sync

# æˆ–è€…ä½¿ç”¨ pip
pip install -e .
```

### è¿è¡Œåº”ç”¨

#### å•æ¬¡æµ‹è¯•

```bash
# å®Œæ•´æµç¨‹ï¼šå‘é€è¯·æ±‚ â†’ ç”Ÿæˆå“åº” â†’ å¯è§†åŒ–ç»“æœ
make run

# æˆ–è€…åˆ†æ­¥æ‰§è¡Œï¼š
make curl    # å‘é€APIè¯·æ±‚è·å–è·¯å¾„è§„åˆ’ç»“æœ
make main    # ç”Ÿæˆè¾“å…¥åœ°å›¾å¯è§†åŒ–
make view    # æŸ¥çœ‹è¾“å‡ºç»“æœåœ°å›¾

# ä»…ç”Ÿæˆå¯è§†åŒ–ï¼ˆä¸å‘é€è¯·æ±‚ï¼‰
make debug
```

#### ä»æ—¥å¿—ç”Ÿæˆå¯è§†åŒ–

```bash
# 1. å°†æ—¥å¿—æ–‡ä»¶æ”¾å…¥ from_logs/ ç›®å½•
# 2. è¿è¡Œæ—¥å¿—è§£æè„šæœ¬
python viz_from_logs.py

# è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
# - è§£ææ—¥å¿—ä¸­çš„è¯·æ±‚å’Œå“åº”æ•°æ®
# - ç”Ÿæˆ req.json å’Œ response.json
# - åˆ›å»º input_map.html å’Œ output_map.html
# - è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¯è§†åŒ–ç»“æœ
```

#### æ‰¹é‡æµ‹è¯•

```bash
# ä½¿ç”¨ test_input ç›®å½•è¿›è¡Œæ‰¹é‡æµ‹è¯•
make test_batch

# ä½¿ç”¨ test_input_from_log ç›®å½•è¿›è¡Œæ‰¹é‡æµ‹è¯•
make test_batch_from_log

# è¾“å‡ºç»“æœä¼šä¿å­˜åœ¨ test_output/run_YYYYMMDD_HHMMSS/ ç›®å½•ä¸‹
```

#### æ‰¹é‡å¯è§†åŒ–

```bash
# å¯¹å·²æœ‰çš„ä¸€æ‰¹ JSON æ•°æ®è¿›è¡Œæ‰¹é‡å¯è§†åŒ–
python batch_viz.py

# è¾“å…¥: 4c1396ccc039445ea171519d811d85cc/ ç›®å½•ä¸‹çš„ *-req.json å’Œ *-rsp.json
# è¾“å‡º: 4c1396ccc039445ea171519d811d85cc/html/ ç›®å½•ä¸‹çš„ HTML æ–‡ä»¶
```

## ğŸ“‹ æ•°æ®æ ¼å¼

### è¯·æ±‚æ•°æ® (data/req.json)
åŒ…å«ä»“åº“ä¿¡æ¯ã€è½¦è¾†ä¿¡æ¯ã€ç«™ç‚¹éœ€æ±‚ç­‰ç‰©æµæ•°æ®ï¼š
- `depot`: ä»“åº“ä¿¡æ¯ï¼ˆä½ç½®ã€åç§°ç­‰ï¼‰
- `vehicle`: è½¦è¾†ä¿¡æ¯ï¼ˆå½“å‰ä½ç½®ã€å®¹é‡ã€çŠ¶æ€ç­‰ï¼‰
- `stations`: é…é€ç«™ç‚¹åˆ—è¡¨ï¼ˆéœ€æ±‚ã€ä½ç½®ã€æœåŠ¡æ—¶é—´ç­‰ï¼‰

### å“åº”æ•°æ® (data/response.json)
åŒ…å«è·¯å¾„è§„åˆ’ç»“æœï¼š
- `routes`: è§„åˆ’å¥½çš„é…é€è·¯çº¿
- `unassigned_tasks`: æœªæŒ‡æ´¾çš„ç«™ç‚¹ä»»åŠ¡
- å„ç«™ç‚¹çš„åˆ°è¾¾æ—¶é—´ã€æœåŠ¡æ—¶é—´ç­‰ä¿¡æ¯

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python 3.12+** - ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Folium** - äº¤äº’å¼åœ°å›¾å¯è§†åŒ–
- **åæ ‡è½¬æ¢ç®—æ³•** - BD-09åˆ°WGS84ç²¾ç¡®è½¬æ¢
- **Makefile** - è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹

## ï¿½ ä¸»è¦æ–‡ä»¶è¯´æ˜

### main.py
ä¸»åº”ç”¨ç¨‹åºï¼ŒåŒ…å«ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼š
1. `create_visualization()` - åˆ›å»ºè¾“å…¥æ•°æ®çš„åŸºç¡€å¯è§†åŒ–
2. `create_output_visualization()` - åˆ›å»ºç¾åŒ–åçš„è¾“å‡ºç»“æœå¯è§†åŒ–

### batch_viz.py
æ‰¹é‡å¯è§†åŒ–è„šæœ¬ï¼Œç”¨äºå¤„ç†å¤šç»„è¯·æ±‚-å“åº”å¯¹ï¼š
- è‡ªåŠ¨åŒ¹é… `*-req.json` å’Œ `*-rsp.json` æ–‡ä»¶
- æ‰¹é‡ç”Ÿæˆè¾“å…¥å’Œè¾“å‡ºåœ°å›¾
- è¾“å‡ºåˆ° `html/` å­ç›®å½•

### batch_test.py
æ‰¹é‡æµ‹è¯•è„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨åŒ–æµ‹è¯•ï¼š
- è¯»å–è¾“å…¥ç›®å½•ä¸­çš„JSONæ–‡ä»¶
- å‘é€APIè¯·æ±‚è·å–å“åº”
- ç”Ÿæˆå¯è§†åŒ–ç»“æœ
- æ”¯æŒæ—¶é—´æˆ³å‘½åé¿å…è¦†ç›–

### rid_log_matcher.py
æ—¥å¿—è¯·æ±‚å“åº”åŒ¹é…å™¨ï¼Œç”¨äºä»ç®—æ³•æ—¥å¿—ä¸­æå–æ•°æ®ï¼š
- åŸºäºæ­£åˆ™è¡¨è¾¾å¼æå–æ—¥å¿—ä¸­çš„è¯·æ±‚å’Œå“åº”
- ç”¨ridå­—æ®µåŒ¹é…è¯·æ±‚å“åº”å¯¹
- é€’å½’æœç´¢åµŒå¥—JSONç»“æ„ä¸­çš„å…³é”®å­—æ®µ
- è¿‡æ»¤ç‰¹å®šå†³ç­–ç±»å‹çš„è°ƒåº¦æ•°æ®
- ç”Ÿæˆè¯¦ç»†çš„è°ƒåº¦ä¸šåŠ¡åˆ†ææŠ¥å‘Š

### request_and_visualize.py
è¯·æ±‚ä¸å¯è§†åŒ–å¯¹æ¯”å·¥å…·ï¼Œé›†æˆæœ¬åœ°æ¥å£è°ƒç”¨å’Œå¯è§†åŒ–åŠŸèƒ½ï¼š
- å‘é€è¯·æ±‚åˆ°æœ¬åœ°ç®—æ³•æ¥å£è·å–æ–°å“åº”
- å¯è§†åŒ–åŸå§‹è¾“å…¥è¾“å‡ºæ•°æ®
- å¯¹æ¯”åŸå§‹å“åº”ä¸æ–°å“åº”çš„å¯è§†åŒ–ç»“æœ
- æ”¯æŒå¹¶è¡Œå¤„ç†å¤šä¸ªè¯·æ±‚
- æ”¯æŒè‡ªå®šä¹‰è¾“å…¥è¾“å‡ºç›®å½•å’Œå¤„ç†æ•°é‡

### viz_from_logs.py
æ—¥å¿—è§£æè„šæœ¬ï¼Œä»æ—¥å¿—æ–‡ä»¶æå–æ•°æ®ï¼š
- è§£ææ—¥å¿—ä¸­çš„è¯·æ±‚è°ƒåº¦å‚æ•°å’Œè®¡åˆ’è°ƒåº¦ç»“æœ
- æ”¯æŒJavaå¯¹è±¡æ ¼å¼çš„è§£æ
- è‡ªåŠ¨ç”ŸæˆJSONå’ŒHTMLæ–‡ä»¶
- è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¯è§†åŒ–ç»“æœ

### utils/coord_transform.py
åæ ‡è½¬æ¢å·¥å…·ï¼Œæä¾›ï¼š
- `bd09_to_wgs84()` - ç™¾åº¦åæ ‡ç³»åˆ°WGS84åæ ‡ç³»çš„è½¬æ¢
- ç²¾ç¡®çš„åæ ‡è½¬æ¢ç®—æ³•å®ç°

### Makefile
è‡ªåŠ¨åŒ–è„šæœ¬ï¼š
- `make run` - å®Œæ•´è¿è¡Œæµç¨‹ï¼ˆå‘é€è¯·æ±‚ + ç”Ÿæˆå¯è§†åŒ–ï¼‰
- `make debug` - ä»…ç”Ÿæˆå¯è§†åŒ–ï¼ˆä¸å‘é€è¯·æ±‚ï¼‰
- `make curl` - å‘é€APIè¯·æ±‚
- `make main` - è¿è¡Œä¸»ç¨‹åº
- `make view` - æŸ¥çœ‹ç»“æœ
- `make test_batch` - æ‰¹é‡æµ‹è¯•
- `make test_batch_from_log` - ä»æ—¥å¿—æ‰¹é‡æµ‹è¯•

## ğŸ¨ å¯è§†åŒ–ç‰¹æ€§

- **é¢œè‰²ç¼–ç **ï¼šç»¿è‰²è¡¨ç¤ºæ­£éœ€æ±‚(è¡¥è´§)ï¼Œæ©™è‰²è¡¨ç¤ºè´Ÿéœ€æ±‚(å–è´§)
- **åŠ¨æ€è·¯çº¿**ï¼šèš‚èšè·¯å¾„åŠ¨ç”»æ˜¾ç¤ºè¡Œé©¶è·¯çº¿
- **é¡ºåºæ ‡è®°**ï¼šä½¿ç”¨å¸¦æ•°å­—çš„åœ†å½¢æ ‡è®°æ˜¾ç¤ºé…é€é¡ºåº
- **å›¾å±‚æ§åˆ¶**ï¼šå¯åˆ‡æ¢æ˜¾ç¤ºå·²æŒ‡æ´¾è·¯çº¿å’ŒæœªæŒ‡æ´¾ç«™ç‚¹
- **è¯¦ç»†ä¿¡æ¯**ï¼šç‚¹å‡»æ ‡è®°æ˜¾ç¤ºå®Œæ•´çš„ç‰©æµä¿¡æ¯

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šå¿«é€Ÿæµ‹è¯•å•ä¸ªæ¡ˆä¾‹
```bash
# 1. å‡†å¤‡è¯·æ±‚æ•°æ®åˆ° data/req.json
# 2. è¿è¡Œå®Œæ•´æµç¨‹
make run

# 3. æŸ¥çœ‹ç”Ÿæˆçš„å¯è§†åŒ–
# - input_map.html: æ˜¾ç¤ºç«™ç‚¹åˆ†å¸ƒ
# - output_map.html: æ˜¾ç¤ºè§„åˆ’è·¯çº¿
```

### åœºæ™¯ 2ï¼šä»å†å²æ—¥å¿—ç”Ÿæˆå¯è§†åŒ–
```bash
# 1. å°†æ—¥å¿—æ–‡ä»¶æ”¾å…¥ from_logs/ ç›®å½•
cp your_log.txt from_logs/

# 2. è¿è¡Œæ—¥å¿—è§£æ
python viz_from_logs.py

# 3. è‡ªåŠ¨ç”Ÿæˆå¹¶æ‰“å¼€å¯è§†åŒ–ç»“æœ
# ç»“æœä¿å­˜åœ¨ from_logs/{log_hash}/ ç›®å½•
```

### åœºæ™¯ 3ï¼šæ‰¹é‡æµ‹è¯•å¤šä¸ªæ¡ˆä¾‹
```bash
# 1. å‡†å¤‡å¤šä¸ªæµ‹è¯•JSONæ–‡ä»¶åˆ° test_input/ ç›®å½•
# 2. è¿è¡Œæ‰¹é‡æµ‹è¯•
make test_batch

# 3. æŸ¥çœ‹æ‰¹é‡æµ‹è¯•ç»“æœ
# ç»“æœä¿å­˜åœ¨ test_output/run_YYYYMMDD_HHMMSS/ ç›®å½•
```

### åœºæ™¯ 4ï¼šæ‰¹é‡å¯è§†åŒ–å·²æœ‰æ•°æ®
```bash
# 1. å‡†å¤‡æˆå¯¹çš„ req/rsp JSONæ–‡ä»¶
# 2. è¿è¡Œæ‰¹é‡å¯è§†åŒ–
python batch_viz.py

# 3. æŸ¥çœ‹ç”Ÿæˆçš„HTMLæ–‡ä»¶
# ç»“æœä¿å­˜åœ¨å¯¹åº”ç›®å½•çš„ html/ å­ç›®å½•
```

### åœºæ™¯ 5ï¼šä»ç®—æ³•æ—¥å¿—æå–æ•°æ®å¹¶å¯è§†åŒ–
```bash
# 1. å°†ç®—æ³•æ—¥å¿—æ–‡ä»¶æ”¾å…¥ mylog_input/ ç›®å½•
cp your_algorithm_log.log mylog_input/app_2026-01-21.log

# 2. è¿è¡Œæ—¥å¿—åŒ¹é…å™¨æå–è¯·æ±‚å“åº”æ•°æ®
python rid_log_matcher.py

# 3. æŸ¥çœ‹æå–çš„ç»“æœå’Œåˆ†ææŠ¥å‘Š
# ç»“æœä¿å­˜åœ¨ mylog_input/app_2026-01-21/ ç›®å½•
# æ§åˆ¶å°ä¼šæ˜¾ç¤ºè°ƒåº¦ä¸šåŠ¡åˆ†ææŠ¥å‘Š

# 4. å¯è§†åŒ–åŸå§‹è¾“å…¥è¾“å‡º
python request_and_visualize.py visualize-original --input-dir mylog_input/app_2026-01-21

# 5. æŸ¥çœ‹åŸå§‹å¯è§†åŒ–ç»“æœ
# ç»“æœä¿å­˜åœ¨ visualization/original/ ç›®å½•
```

### åœºæ™¯ 6ï¼šè°ƒç”¨æœ¬åœ°æ¥å£å¹¶å¯¹æ¯”å¯è§†åŒ–
```bash
# 1. ç¡®ä¿æœ¬åœ°ç®—æ³•æ¥å£æ­£åœ¨è¿è¡Œ
# 2. å‘é€è¯·æ±‚åˆ°æœ¬åœ°æ¥å£è·å–æ–°å“åº”
python request_and_visualize.py request --input-dir mylog_input/app_2026-01-21 --api-url http://localhost:8000/api/your-endpoint

# 3. å¯¹æ¯”å¯è§†åŒ–åŸå§‹å“åº”ä¸æ–°å“åº”
python request_and_visualize.py visualize-compare --input-dir mylog_input/app_2026-01-21 --new-output-dir new_responses

# 4. æŸ¥çœ‹å¯¹æ¯”å¯è§†åŒ–ç»“æœ
# ç»“æœä¿å­˜åœ¨ visualization/compare/ ç›®å½•
```

## ğŸ”§ å¼€å‘

### å®‰è£…å¼€å‘ä¾èµ–

```bash
uv sync --dev
```

### ä»£ç æ ¼å¼åŒ–

```bash
make format
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- ğŸ“§ é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/your-username/viz/issues)
- ğŸ’¬ è®¨è®º: é¡¹ç›®è®¨è®ºåŒº

---

â­ å¦‚æœè¿™ä¸ªç‰©æµå¯è§†åŒ–å·¥å…·å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼